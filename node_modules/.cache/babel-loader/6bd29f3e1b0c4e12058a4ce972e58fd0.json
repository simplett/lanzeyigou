{"remainingRequest":"c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\babel-loader\\lib\\index.js!c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\src\\components\\aliyun.vue?vue&type=script&lang=js&","dependencies":[{"path":"c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\src\\components\\aliyun.vue","mtime":1568255505000},{"path":"c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"c:\\Users\\qwe\\Desktop\\lanzeyigou-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"c:\\\\Users\\\\qwe\\\\Desktop\\\\lanzeyigou-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ossClient from \"../assets/client.js\";\nexport default {\n  name: 'Upload',\n  data: function data() {\n    return {\n      images: [],\n      uploadConf: {\n        region: \"oss-cn-beijing.aliyuncs.com\",\n        accessKeyId: \"LTAIlbkoZl60gNWT\",\n        accessKeySecret: \"CbVR0tmpKXqAIEXxavJDqad3lcIIez\",\n        bucket: \"simplett-img\",\n        stsToken: \"112\"\n      }\n    };\n  },\n  methods: {\n    /**\n     * 初始化\n     */\n    init: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var aliyun, _ref, Region, AccessKeyId, AccessKeySecret, Bucket, SecurityToken;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                //获取阿里云token  这里是后台返回来的数据\n                aliyun = {\n                  Region: \"oss-cn-beijing.aliyuncs.com\",\n                  AccessKeyId: 'LTAIlbkoZl60gNWT',\n                  AccessKeySecret: 'CbVR0tmpKXqAIEXxavJDqad3lcIIez',\n                  Bucket: 'simplett-img',\n                  SecurityToken: '112'\n                };\n                _ref = aliyun && aliyun.data, Region = _ref.Region, AccessKeyId = _ref.AccessKeyId, AccessKeySecret = _ref.AccessKeySecret, Bucket = _ref.Bucket, SecurityToken = _ref.SecurityToken;\n                this.uploadConf.region = Region;\n                this.uploadConf.accessKeyId = AccessKeyId;\n                this.uploadConf.accessKeySecret = AccessKeySecret;\n                this.uploadConf.bucket = Bucket;\n                this.uploadConf.stsToken = SecurityToken;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n\n    /**\n     * 阿里云OSS上传\n     */\n    uploadHttp: function uploadHttp(_ref2) {\n      var file = _ref2.file;\n      var _ALIOSS_IMG_ = 'ALIOSS_IMG_',\n          imgName = _ALIOSS_IMG_.imgName;\n      var fileName = \"\".concat(imgName, \"/\").concat(Date.parse(new Date())); //定义唯一的文件名\n\n      ossClient(this.uploadConf).put(fileName, file, {\n        'ContentType': 'image/jpeg'\n      }).then(function (_ref3) {\n        var res = _ref3.res,\n            url = _ref3.url,\n            name = _ref3.name;\n\n        if (res && res.status == 200) {\n          console.log(\"\\u963F\\u91CC\\u4E91OSS\\u4E0A\\u4F20\\u56FE\\u7247\\u6210\\u529F\\u56DE\\u8C03\", res, url, name);\n        }\n      }).catch(function (err) {\n        console.log(\"\\u963F\\u91CC\\u4E91OSS\\u4E0A\\u4F20\\u56FE\\u7247\\u5931\\u8D25\\u56DE\\u8C03\", err);\n      });\n    },\n\n    /**\n     * 图片限制\n     */\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPEG = file.name.split('.')[1] === 'jpeg';\n      var isJPG = file.name.split('.')[1] === 'jpg';\n      var isPNG = file.name.split('.')[1] === 'png';\n      var isLt500K = file.size / 1024 / 500 < 2;\n\n      if (!isJPG && !isJPEG && !isPNG) {\n        this.$message.error('上传图片只能是 JPEG/JPG/PNG 格式!');\n      }\n\n      if (!isLt500K) {\n        this.$message.error('单张图片大小不能超过 500KB!');\n      }\n\n      return (isJPEG || isJPG || isPNG) && isLt500K;\n    },\n\n    /**\n     * 移除图片\n     */\n    handleRemove: function handleRemove(file, fileList) {\n      console.log(\"\\u79FB\\u9664\\u56FE\\u7247\\u56DE\\u8C03\", file, fileList);\n    }\n  }\n};",{"version":3,"sources":["aliyun.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-upload\n        class=\"upload\"\n        action=\"\"\n        :drag=\"true\"\n        :multiple=\"true\"\n        :file-list=\"images\"\n        :http-request=\"uploadHttp\"\n        :before-upload=\"beforeAvatarUpload\"\n        :on-remove=\"handleRemove\"\n        list-type=\"picture-card\">\n        <i class=\"el-icon-plus avatar-uploader-icon\">上传图片</i>\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/jpeg/png文件，且不超过500kb</div>\n    </el-upload>\n</template>\n<script type=\"text/ecmascript-6\">\nimport ossClient from '../assets/client.js';\nexport default {\n    name: 'Upload',\n    data () {\n        return {\n            images: [],\n            uploadConf: {\n                region: \"oss-cn-beijing.aliyuncs.com\",\n                accessKeyId: \"LTAIlbkoZl60gNWT\",\n                accessKeySecret: \"CbVR0tmpKXqAIEXxavJDqad3lcIIez\",\n                bucket: \"simplett-img\",\n                stsToken: \"112\"\n            }\n        };\n    },\n    methods: {\n\t\t/**\n\t\t * 初始化\n\t\t */\n        async init () {\n            //获取阿里云token  这里是后台返回来的数据\n            const aliyun = {\n                Region: \"oss-cn-beijing.aliyuncs.com\",\n                AccessKeyId: 'LTAIlbkoZl60gNWT',\n                AccessKeySecret: 'CbVR0tmpKXqAIEXxavJDqad3lcIIez',\n                Bucket: 'simplett-img',\n                SecurityToken: '112'\n            };\n            const {Region, AccessKeyId, AccessKeySecret, Bucket, SecurityToken} = aliyun && aliyun.data;\n            this.uploadConf.region = Region;\n            this.uploadConf.accessKeyId = AccessKeyId;\n            this.uploadConf.accessKeySecret = AccessKeySecret;\n            this.uploadConf.bucket = Bucket;\n            this.uploadConf.stsToken = SecurityToken;\n        },\n \n        /**\n         * 阿里云OSS上传\n         */\n        uploadHttp({ file }) {\n            const { imgName } = 'ALIOSS_IMG_';\n            const fileName = `${imgName}/${Date.parse(new Date())}`;  //定义唯一的文件名\n            ossClient(this.uploadConf).put(fileName, file, {\n                'ContentType': 'image/jpeg'\n            }).then(({res, url, name}) => {\n                if (res && res.status == 200) {\n                    console.log(`阿里云OSS上传图片成功回调`, res, url, name);\n                }\n            }).catch((err) => {\n                console.log(`阿里云OSS上传图片失败回调`, err);\n            });\n        },\n \n\t\t/**\n\t\t * 图片限制\n\t\t */\n        beforeAvatarUpload (file) {\n            const isJPEG = file.name.split('.')[1] === 'jpeg';\n            const isJPG = file.name.split('.')[1] === 'jpg';\n            const isPNG = file.name.split('.')[1] === 'png';\n            const isLt500K = file.size / 1024 / 500 < 2;\n            if (!isJPG && !isJPEG && !isPNG) {\n                this.$message.error('上传图片只能是 JPEG/JPG/PNG 格式!');\n            }\n            if (!isLt500K) {\n                this.$message.error('单张图片大小不能超过 500KB!');\n            }\n            return (isJPEG || isJPG || isPNG) && isLt500K;\n        },\n \n\t\t/**\n\t\t * 移除图片\n\t\t */\n        handleRemove (file, fileList) {\n            console.log(`移除图片回调`,file, fileList);\n        }\n    }\n};\n</script>"],"sourceRoot":"src/components"}]}